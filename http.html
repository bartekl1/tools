<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>HTTP (REST) client</title>

    <meta name="description" content="Tools">
    <meta name="keywords" content="Tools">
    <meta name="author" content="Bartek L">

    <link rel="stylesheet" href="/tools/css/style.css">

    <link rel="stylesheet" href="/tools/css/modules/bootstrap.min.css">
    <link rel="stylesheet" href="/tools/css/modules/bootstrap-icons/bootstrap-icons.min.css">

    <link rel="manifest" href="/tools/manifest.json">

    <link rel="shortcut icon" href="/tools/img/icons/icon.ico">
    <link rel="apple-touch-icon" href="/tools/img/icons/icon_x192.png">

    <!-- Standard browsers -->
    <meta name="theme-color" content="#0d6efd"/>
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#0d6efd">
</head>
<body class="px-3 pt-2">
    <div class="top-bar">
        <div class="float-start top-bar-buttons">
            <button class="top-bar-button" onclick="window.location.reload()">
                <i class="bi bi-arrow-clockwise"></i>
            </button>
            <a class="top-bar-button" href="/tools/">
                <i class="bi bi-house"></i>
            </a>
        </div>
        <div class="input-group top-bar-search-group">
            <span class="input-group-text top-bar-search-text"><i class="bi bi-search"></i></span>
            <input type="text" class="form-control top-bar-search" placeholder="Search">
        </div>
    </div>

    <div class="text-light-emphasis h2 text-center">
        <a href="/tools/" class="home-link">
            <span text-id="0">Tools</span>
            <i class="bi bi-tools"></i>
        </a>
    </div>

    <div class="h3">
        <i class="bi bi-wifi"></i>
        <span text-id="12">HTTP (REST) client</span>
    </div>

    <div id="offline" class="alert alert-danger p-0 ps-2 d-none">
        <div class="float-start fs-1">
            <i class="bi bi-wifi-off"></i>
        </div>
        <div class="float-start ps-3 py-3">
            <span text-id="21">This tool is not available offline.</span>
        </div>
        <div class="clearfix"></div>
    </div>

    <div id="tool-page">
        <div class="d-flex">
            <div class="form-floating" id="form-floating-url">
                <input type="url" class="form-control" id="url" placeholder="URL">
                <label for="url">URL</label>
            </div>
            <div class="form-floating">
                <select class="form-select" id="method">
                    <option value="get" selected>GET</option>
                    <option value="post">POST</option>
                    <option value="put">PUT</option>
                    <option value="delete">DELETE</option>
                    <option value="patch">PATCH</option>
                    <option value="head">HEAD</option>
                    <option value="options">OPTIONS</option>
                    <option value="connect">CONNECT</option>
                    <option value="trace">TRACE</option>
                </select>
                <label for="method" text-id="71">Method</label>
            </div>
            <button class="btn btn-success ms-1 px-3" id="send">
                <i class="bi bi-send"></i>
            </button>
            <button class="btn btn-success ms-1 px-3 d-none" id="sending" disabled>
                <span class="spinner-border spinner-border-sm"></span>
            </button>
        </div>

        <ul class="nav nav-pills mt-3 mb-2" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#request-content" type="button" role="tab" text-id="72">Content</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#request-headers" type="button" role="tab" text-id="73">Headers</button>
            </li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane fade show active" id="request-content" role="tabpanel" tabindex="0">
                <select class="form-select" id="content-type">
                    <option value="json" selected>JSON (application/json)</option>
                    <option value="html">HTML (text/html)</option>
                    <option value="xml">XML (application/xml)</option>
                    <option value="text">TEXT (text/plain)</option>
                </select>

                <textarea class="form-control mt-2 source-code" id="request-content-code" rows="7" spellcheck="false"></textarea>
            </div>
            <div class="tab-pane fade" id="request-headers" role="tabpanel" tabindex="0">
                <div class="header d-flex mb-2">
                    <input type="text" class="form-control header-name me-2 source-code" spellcheck="false">
                    <input type="text" class="form-control header-value me-2 source-code" spellcheck="false">
                    <button class="btn btn-secondary header-delete">
                        <i class="bi bi-x-lg"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="response" class="d-none">
            <div class="d-flex justify-content-between flex-column flex-sm-row flex-md-row flex-lg-row flex-xl-row flex-xxl-row fs-4 mt-2">
                <div>
                    <span>Status:</span>
                    <span id="response-status"></span>
                </div>
                <div>
                    <span>Time:</span>
                    <span id="response-time"></span>
                </div>
                <div>
                    <span>Size:</span>
                    <span id="response-size"></span>
                </div>
            </div>

            <ul class="nav nav-pills mt-3 mb-2" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#response-content" type="button" role="tab" text-id="72">Content</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" data-bs-toggle="pill" data-bs-target="#response-headers" type="button" role="tab" text-id="73">Headers</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link d-none" data-bs-toggle="pill" data-bs-target="#response-html" type="button" role="tab">HTML</button>
                </li>
            </ul>
    
            <div class="tab-content">
                <div class="tab-pane fade show active" id="response-content" role="tabpanel" tabindex="0">
                    <textarea class="form-control mt-2 source-code" id="response-content-code" rows="7" spellcheck="false" readonly></textarea>
                </div>
                <div class="tab-pane fade" id="response-headers" role="tabpanel" tabindex="0">
                    <div class="header d-flex mb-2">
                        <input type="text" class="form-control header-name me-2 source-code" spellcheck="false" readonly>
                        <input type="text" class="form-control header-value me-2 source-code" spellcheck="false" readonly>
                    </div>
                </div>
                <div class="tab-pane fade" id="response-html" role="tabpanel" tabindex="0">
                    <iframe id="response-iframe"></iframe>
                </div>
            </div>
        </div>
    </div>

    <script src="/tools/js/topbar.js"></script>
    <script src="/tools/js/theme.js"></script>
    <script src="/tools/js/translate.js"></script>
    <script src="/tools/js/error.js"></script>
    <script src="/tools/js/offline.js"></script>
    
    <script src="/tools/js/modules/bootstrap.bundle.min.js"></script>
    
    <script src="/tools/js/http.js"></script>

    <script>
        var reg;
        // Register the service worker
        if ('serviceWorker' in navigator) {
            // Wait for the 'load' event to not block other work
            window.addEventListener('load', async () => {
                // Try to register the service worker.
                try {
                    reg = await navigator.serviceWorker.register('/tools/sw.js');
                    console.log('Service worker registered! ðŸ˜Ž', reg);
                } catch (err) {
                    console.log('ðŸ˜¥ Service worker registration failed: ', err);
                }
            });
        }
    </script>
</body>
</html>